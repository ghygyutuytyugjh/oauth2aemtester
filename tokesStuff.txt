org.apache.oltu.oauth2
org.apache.oltu.oauth2.client
1.0.1

login-token=48e5e2dc-b4b2-42b6-8f7e-0b1d1a7d05c6%3a58f389c7-61b2-4002-b372-c060870709be_f19ad5de9c38178a55e6e3678343582e%3acrx.default; 
cq-authoring-mode=TOUCH


{SHA-256}0fe6bc7642adfe24-a1ca3c50677772bba5d259a7c58cc2c73d5b67071f1c57d5564a7f8e23a48fca

curl --location --request POST 'http://localhost:4502/bin/vhi/create' \
--header 'Authorization: BearereyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJrN2tjZGVhcWZhbm0wbzlwNG41bnFwZGdkYi1vamZrdy03YiIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5NjY3MzA2MiwiaWF0IjoxNTk2NjM3MDYyLCJzY29wZSI6IlJldHJpZXZlU2VjdGlvblNjb3BlIiwiY3R5IjoiYXQifQ.zCrdDLlLTSvknYjhDCsxcXPcvO0X0Rd4qZV5uMmLC24' \
--header 'Content-Type: application/json' \
--data-raw '{
    "asset_type": "cf-subsection",
    "subsection_id": "8761",
    "pb_subsection_name": "gp"
}'


curl --location --request POST 'http://localhost:4502/bin/vhi/create' \
--header 'Authorization: BearereyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJrN2tjZGVhcWZhbm0wbzlwNG41bnFwZGdkYi1vamZrdy03YiIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5NjY3MzA2MiwiaWF0IjoxNTk2NjM3MDYyLCJzY29wZSI6IlJldHJpZXZlU2VjdGlvblNjb3BlIiwiY3R5IjoiYXQifQ.zCrdDLlLTSvknYjhDCsxcXPcvO0X0Rd4qZV5uMmLC24' \
--header 'Content-Type: application/json' \
--data-raw '{
    "asset_type": "cf-subsection",
    "subsection_id": "8761",
    "pb_subsection_name": "gp"
}'


curl --location --request GET 'http://localhost:4502/bin/vhi/retrieve?subsection_id=8763' \
--header 'Authorization: BearereyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJrN2tjZGVhcWZhbm0wbzlwNG41bnFwZGdkYi1vamZrdy03YiIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5NjY3MzA2MiwiaWF0IjoxNTk2NjM3MDYyLCJzY29wZSI6IlJldHJpZXZlU2VjdGlvblNjb3BlIiwiY3R5IjoiYXQifQ.zCrdDLlLTSvknYjhDCsxcXPcvO0X0Rd4qZV5uMmLC24' \
--header 'Cookie: login-token=48e5e2dc-b4b2-42b6-8f7e-0b1d1a7d05c6%3a58f389c7-61b2-4002-b372-c060870709be_f19ad5de9c38178a55e6e3678343582e%3a'

curl --location --request GET 'http://localhost:4502/bin/vhi/retrieve?subsection_id=8764' \
--header 'Authorization: BearereyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJrN2tjZGVhcWZhbm0wbzlwNG41bnFwZGdkYi1vamZrdy03YiIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5NjY3MzA2MiwiaWF0IjoxNTk2NjM3MDYyLCJzY29wZSI6IlJldHJpZXZlU2VjdGlvblNjb3BlIiwiY3R5IjoiYXQifQ.zCrdDLlLTSvknYjhDCsxcXPcvO0X0Rd4qZV5uMmLC24' \
--header 'Cookie: login-token=48e5e2dc-b4b2-42b6-8f7e-0b1d1a7d05c6%3a58f389c7-61b2-4002-b372-c060870709be_f19ad5de9c38178a55e6e3678343582e%3acrx.default; cq-authoring-mode=TOUCH'
                              0286d576-5950-47eb-a24e-f1d439ef8e2c

COOKIE login
curl --location --request GET 'http://localhost:4502/bin/vhi/retrieve?subsection_id=8764' \
--header 'Authorization: BearereyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJrN2tjZGVhcWZhbm0wbzlwNG41bnFwZGdkYi1vamZrdy03YiIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5NzA1NDkxOCwiaWF0IjoxNTk3MDE4OTE4LCJzY29wZSI6IlJldHJpZXZlU2NvcGUiLCJjdHkiOiJhdCJ9.OYyAWgOSCiCYer687DuPak0G0rbP-St7fF5vJ3MQQZw' --header 'Content-Type: application/json' \
--header 'Cookie: login-token=48e5e2dc-b4b2-42b6-8f7e-0b1d1a7d05c6%3a269b0ef5-4d91-4356-95ae-481f253fcad1_f6fadd168f7175241e25d1d0d82d454d%3acrx.default; cq-authoring-mode=TOUCH' --data-raw 


login-token=48e5e2dc-b4b2-42b6-8f7e-0b1d1a7d05c6%3a58f389c7-61b2-4002-b372-c060870709be_f19ad5de9c38178a55e6e3678343582e%3acrx.default; 

login-token location: /home/users/i/iHUvl4PVH5K3kvoQYqzr/.tokens/0286d576-5950-47eb-a24e-f1d439ef8e2c


eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJtNXI3cTI4NDlkbmlnZWhuanZsOTNnM3U1Ni03eXFxb3V0OCIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5OTU2OTIwNywiaWF0IjoxNTk5NTY1NjA3LCJzY29wZSI6IlByb2R1Y3RJbmZvcm1hdGlvblNjb3BlIiwiY3R5IjoiYXQifQ.czSjOe3QRCnUU-AKZB0pfJCXtD-J60rAk0oG803WqPQ





1)	JWT token generated by JWT.io
This requires public and private key to be generated 
This may need to be done programmatically?
2)	Use the JWT token to generate access token
curl -H "content-type: application/x-www-form-urlencoded" -d "assertion=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjQ1MDIvb2F1dGgvdG9rZW4iLCJpc3MiOiJtNXI3cTI4NDlkbmlnZWhuanZsOTNnM3U1Ni03eXFxb3V0OCIsInN1YiI6ImFkbWluIiwic2NvcGUiOiJQcm9kdWN0SW5mb3JtYXRpb25TY29wZSIsImN0eSI6ImNvZGUifQ.kgCI1tHgzhX2JBM-Vi6njaHaxVobww6gK_OsXg5jassVHTLLUc2WLq5glDmrQqzgY3AL40asVYbfA9JjB5JbBZqBzHth23ZULhNaB9EL8i95mEtyhnVLWgndMF9h8vRH1_Od7myq2mN9yIyYqRV0oA0Yz4L57E0PnLqToCrYuCXBJGRq17LWYyuZ4p4YhAjW22YYb5h0ZA4jsiltdNsAwFIyrZkTTuzEfYbEwmfQeNmBluYkwhnrhk7VIQOr_VHl_s1LvL-hPID5x7C12FOruPbOvklIoxtL5lGB2ZmAvKvo-kbd-LtzRh4yPz5Vnmaawm0_bHFCbvr_Cc4GZrmeRw&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer&client_id=m5r7q2849dnigehnjvl93g3u56-7yqqout8&client_secret=agfsadbckiripri3fmhuccgki6&redirect_uri=http://localhost:4502" http://localhost:4502/oauth/token
3)	Use the Access token to execute an AEM request
curl -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiI0Z2VmOWVlY3VkYTYwZjlpMmljcnNtdWU3cy02aXllcGp6aSIsImlzcyI6IkFkb2JlIEdyYW5pdGUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTU5ODk3NjcxNSwiaWF0IjoxNTk4OTczMTE1LCJzY29wZSI6InByb2ZpbGUiLCJjdHkiOiJhdCJ9.VEGCTa3SwzEVBxKUNwmBwI8bfL7O_4_pZOF-_C4RCLA" http://localhost:4502/<resourcepath>

Open Items
1)	Can EI team use JWT bearer token grant type? Garrett
2)	Test the feasibility of the above using the custom scope to execute create/retrieve servlet    Emma/Neil
3)	How would this approach work on Publish servers (multiple nodes-multiple private keys) - Neil/Emma




cq-authoring-mode=TOUCH
